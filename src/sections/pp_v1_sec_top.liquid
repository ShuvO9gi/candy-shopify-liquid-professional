<style>
   /* pp_redesign_v1 */
    .pp_redesign_v1 .productImage{
      width: 50% !important;
    }
    .pp_redesign_v1 .productContent {
      padding-left: 0px !important;
      width: 50% !important;
      height: 1000px;
      overflow-y: scroll;
  }
     .productContent::-webkit-scrollbar {
      width: 0px;
  }
    .productContent::-webkit-scrollbar-thumb {
      background: #e9dae8;
      border-radius: 10px;
  }
    .pp_redesign_v1 .topContentProduct {
      justify-content: space-between;
      width: 100% !important;
      gap: 50px;
    }
    .productBoxContent{
      background: #FFF3DA;
    }
    .productBoxContent-items {
      max-width: 1130px;
      margin: 0 auto;
      padding-bootom: 50px;
    }
    .productBoxContentHeadline{
      max-width: 1130px;
      margin: 0 auto;
    }.productBoxContent{
      padding: 80px 0;
    }
    .se_img-box {
      display: flex;
      justify-content: space-evenly;
      box-sizing: border-box;

    }
    .video-with-text{
      display: flex;
      padding-top: 40px;
      justify-content: space-between;
      gap: 60px;
    }
    .se_content {
      text-align: center;
      padding: 5px;
      box-sizing: border-box;
      flex: 0 0 25%;
      font-size: 12px;
    }
    .se_content img {
      max-width: 100%;
      height: auto;
      margin: 8px auto;
      min-height: 59px;
    }
    .se_banner-img{
      max-width: 50%;
    }
    .se_banner-img img{
      max-width: 100%;
    }

    .se_title{
        font-weight: 700;
        font-size: 14px;
    }
    .se_title-bottom{
        font-size: 12px;
    }


    .text-se_content{
        font-size: 16px;
        padding: 5px;

    }

    .video-se_content {
        position: relative;
        max-width: 50%;
        max-height: 425px;

    }

    .se_video {
        width: 100%;
        height: 100%;
        display: block;
        object-fit: cover;

    }

    .se_play-button {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        cursor: pointer;
        opacity: 0;
    }
    .video-se_content:hover .se_play-button{
      opacity: 1;
    }
  .video-se_content i{
    color: #ED9F44;
    font-size: 40px;
  }
  .pp_redesign_v1 .se_prod-description{
      padding-top: 100px ;
    }
    .pp_redesign_v1 .productBoxContentHeadline{
    padding-bottom: 30px;
  }
    .christmas_top_img{
      width: 100%;
    }

  .pp_redesign_v1 .sticky {
      position: fixed;
      bottom: 0;
      z-index: 1000;
      background-color: #6E4695;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
      margin: 0 !important;
      width: 100%;
      display: flex;
      max-width: 100% !important;
      left: 0;
      align-items: center;
      justify-content: center;
      padding: 16px 0;
      gap: 10px;
    }
  .pp_redesign_v1 .sticky .product-card__title{
      display: none !important;
  }
  .pp_redesign_v1 .sticky .product{
      width: 100%;
      gap: 10px;
  }
   .pp_redesign_v1 .candyBoxBuyButton{
      padding: 11px 16px !important;
    }
    .pp_redesign_v1 .sticky #AddToCartText-custom{
      font-size: 14px !important;
    }

  .pp_redesign_v1 .productLabel{
      color: #fdac2b;
      font-weight: 700;
  }
    .var__pop-text span{
  	position: absolute;
  	transform: translate(0px, 0px);
  	left: 0;
  	display: flex;
  	color: #fff;
  	font-size: 8px;
  	border-radius: 8px 0px 0px;
  	background: #9458FF;
  	width: 16%;
  	height: 22px;
  	font-weight: 600;
  	justify-content: center;
  	align-items: center;
  	line-height: 130%;
  }
  .var__inner{
  	display: flex;
  	align-items: center;
  	gap: 15px;
  }
  .var__inner__info{
  	display: flex;
  	justify-content: space-between;
  	width: 100%;
  	padding: 10px;
  	align-items: center;
  	gap: 10px;
  }
  .var__info__left{
  	display: flex;
  	flex-direction: column;
  	width: 65%;
  }
  .var__inner__check{
  	display: block !important;
  	border-radius: 50%;
  	position: absolute;
  	left: 24px;
  	top: 25px;
  }
  .var__inner__img{
  	width: 100px;
  	height: auto;
  }
  .prod-variants input{
  	appearance: none;
  }
  .prod-variants label{
  	width: 100%;
  	font-size: 16px;
  	text-transform: inherit;
  	margin-bottom: 10px;
  	display: block;
  	padding: 0px 15px;
  	position: relative;
  	border: 2px solid #D6D6D6;
  	border-radius: 5px;
  	cursor: pointer;
  }
  .var__save{
  	background: #C62315;
  	padding: 4px;
  	font-weight: 600;
  	color: #fff;
  	font-size: 12px;
  	border-radius: 6px;
  	text-align: center;
  }
  .var__title{
  	color: #4d4d4d;
  	font-size: 16px;
  	font-weight: 700;
  }
  .var__title.var__price{
  	color: #C62315;
  	font-size: 18px;
  	font-weight: 700;
  }
  .var__save.var__comp{
  	text-decoration: line-through;
  }
  span.var__title__ship{
  	font-size: 16px;
  	color: #000;
  }
  .prod-variants input:checked+label{
  	border: 2px solid #C62315;
  	border-radius: 10px;
  }
  span.popular_text{
  	position: absolute;
  	right: -29px;
  	top: -9px;
  	display: block;
  	z-index: 9999999;
  	width: 90px;
  }
  .prod-variants input{
  	appearance: none;
  	height: 0;
  	width: 0;
  	overflow: hidden;
  	position: absolute;
  }
    .re-delivery-info{
      padding: 5px 0;
    }
    .re-delivery-info .twb-text-white{
      color: #6E4695 !important;
    }
    .re-delivery-info .time-countdown{
      color: #FFAD05 !important;
    }
    .v_description::before{
      content: "";
      display: block;
      width: 100%;
      height: 1px;
      background-color: #6E4695;
      margin-bottom: 10px;
    }
    .pp_redesign_v1 .candyBoxBuyButton{
      width: -webkit-fill-available !important;
    }
    .pp_redesign_v1 .product{
      width: 100%;
    }
    .pp_redesign_v1 .product-card__btn-wrapper{
      width: 50%;
    }
    .pp_redesign_v1 .product-detail .submit-wrapper{
      width: 50%;
    }
    .re_v1_container .productPriceContent {
      margin-bottom: 10px !important;;
  }
  @media screen and (max-width: 767px){
  	span.var__title__ship{
  		font-size: 10px !important;
  	}
  	 .var__title{
  		color: #4d4d4d;
  		font-size: 10px !important;
  	}
  	 .var__title.var__price{
  		font-size: 14px !important;
  	}
  	 .var__save{
  		font-size: 10px !important;
  	}
  	 .var__pop-text span{
  		width: 20% !important;
  	}

  }
  @media (max-width: 991px) and (min-width: 768px){

  }
  @media (max-width: 1199px) and (min-width: 992px){

  }
  @media (min-width: 1200px){

  }
  @media screen and (width: 767.2px){
  	span.var__title__ship{
  		font-size: 10px !important;
  	}
  	 .var__title{
  		color: #4d4d4d;
  		font-size: 10px !important;
  	}
  	 .var__title.var__price{
  		font-size: 14px !important;
  	}
  	 .var__save{
  		font-size: 10px !important;
  	}
  	 .var__pop-text span{
  		width: 20% !important;
  	}

  }









    /* For desktop screen */
    @media only screen and (min-width: 1024px) {


    .se_img-box{
        max-width: 100%;
        margin-top: 60px;
    }
    .se_content {
        text-align: center;
        padding: 5px;
        box-sizing: border-box;
        flex: 0 0 25%;
        font-size: 12px;
    }

    .text-se_content{
        max-width: 75%;

    }
    }




    /* For tablet */
    @media only screen and (min-width: 768px) and (max-width: 1023px) {
        .text-se_content{
        max-width: 50%;
    }

    .se_video {
        width: 100%;
        height: 285px;
        display: block;
        object-fit: cover;
    }

    .se_img-box {
        max-width: 100%;
    }

    }

    /* For mobile */
    @media only screen and (max-width: 767px) {

   .se_img-box {
      display: flex;
      margin: 0 ;
      max-width: 100%;
      overflow: scroll;
  }
      .se_content {
      flex: 0 0 50% !important;
  }
    .video-with-text {
      gap: 30px !important;
      flex-direction: column;
  }
      .video-se_content {
      max-width: 80% !important;
      margin: 0 auto;
  }
    .pp_redesign_v1 .productImage{
      width: 100% !important;
    }
    .pp_redesign_v1 .productContent{
      width: 100% !important;
      height: unset !Important;
      overflow: hidden !important;
    }
      .pp_redesign_v1 #AddToCartText-custom{
        font-size: 13px !important;
      }
      .pp_redesign_v1 .productBoxContentHeadline {
      padding-bottom: 0 !important;
      padding-left: 30px;
  }
      .product-detail select[class^=variant__input] {
      width: 87% !important;
  }
     .pp_redesign_v1 .productImage {
      margin: 20px 0 !important;
  }
      .se_img-box {
      justify-content: flex-start !important;
      padding-bottom: 10px;
  }
     .pp_redesign_v1 .se_prod-description {
      padding-top: 20px !important;
  }
     .pp_redesign_v1 .productLabel{
      text-align: center;
      }
      .pp_redesign_v1 .productBoxContent {
      padding-bottom: 50px !important;
  }
    .christmas_top_img {
      height: 100px;
      object-fit: cover;
  }
    .pp_redesign_v1 .topContentProduct {
      width: 100% !important;
        margin-top: 0 !important;
  }
    .pp_redesign_v1 .productBoxContent-items{
      display: grid !important;
      grid-template-columns: 1fr 1fr;
      text-align: center;
      justify-items: center;
    }
    .pp_redesign_v1 .variant__input-custom option{
      font-size: 16px;
      padding-left: 10px;
    }
    .product-detail select[class^=variant__input]{
      font-size: 16px !important;
      }
    .productContentHeadline {
       font-size: 22px !important;
      }
    .re-delivery-info {
      font-size: 12px;
      display: flex;
      width: 100%;
      align-items: flex-start;
  }
    .productPriceContent {
      margin-bottom: 10px !important;
  }
    .product-detail{
      margin-top: 0 !Important;
      margin-bottom: 0 !Important;
      }
     #selectedProductImage{
      max-height: 150px;
      margin: 0 auto;
     }
    .pp_redesign_v1 .sticky .product {
      padding: 0 10px;
  }
    .pp_redesign_v1 .sticky {
      padding: 10px 0 14px !important;
    }
    .pp_redesign_v1 .sticky .product-card__btn-wrapper{
      height: 40px !Important;
    }
    .product-detail .product-card__qty-wrapper {
      height: 30px !important;
      margin-top: 0px !important;
  }
    .pp_redesign_v1 .candyBoxBuyButton {
      padding: 4px 8px !important;
  }
    .re_v1_container{
      padding-left: 0 !important;
      padding-right: 0 !important;
    }
    .re_v1_container .productContentHeadline{
      padding-left: 30px !important;
      padding-right: 30px !important;
    }
    .re_v1_container .re-delivery-info{
      padding-left: 30px !important;
      padding-right: 30px !important;
    }
    .re_v1_container .productPriceContent{
      padding-left: 30px !important;
      padding-right: 30px !important;
    }
    .re_v1_container .product-card__title{
      padding-left: 30px !important;
      padding-right: 30px !important;
    }
    .re_v1_container .v_description{
      padding-left: 30px !important;
      padding-right: 30px !important;
    }
    .re_v1_container label:nth-child(1){
      margin-left:30px;
    }
    }
</style>
{% assign today_day = 'now' | date: '%a' %}
{% assign time_hour = 'now' | date: '%H' %}

{% capture timer %}
  <div class="x announcement-link-text type-style-p-regular twb-flex twb-flex-col twb-items-center md:twb-items-start">
    {% if section.settings.holidaytext != blank %}
      <span class="twb-text-white">{{ section.settings.holidaytext }}</span>
    {% elsif today_day == 'Fri' and time_hour >= '14' %}
      <span class="twb-text-white">{{ section.settings.weekendtext }}</span>
    {% elsif today_day == 'Sat' %}
      <span class="twb-text-white">{{ section.settings.weekendtext }}</span>
    {% elsif today_day == 'Sun' and time_hour < '14' %}
      <span class="twb-text-white">{{ section.settings.weekendtext }}</span>
    {% elsif section.settings.order_before != blank %}
      <div>
        <span class="twb-text-white">{{ section.settings.order_before }}</span>
        <span class="time-countdown twb-text-brand-green" data-time></span>
      </div>
    {% endif %}
  </div>
{% endcapture %}
{%- assign current_variant = product.selected_or_first_available_variant %}
{% if section.settings.addtopimage %}
  <img class="christmas_top_img" src="{{ section.settings.image | img_url: 'master' }}">
{% endif %}
<div class="section-container pp_redesign_v1">
  <div class="page-container re_v1_container">
    <div class="topContentProduct flex" style="margin-top: 20px;">
      <div class="productImage">
        <img id="selectedProductImage" src="{{ product | image_url: width: 600 }}">
      </div>
      <div class="productContent">
        <h1 class="productContentHeadline type-style-h2-bold">
          {{ product.title }}
        </h1>
        <div class="re-delivery-info">
          {{ timer }}
        </div>
        <div class="productPriceContent">
          <span class="productPrice type-style-h2-bold" id="productPrice">Fra {{ product.price | money }} </span>
        </div>

        {%- render 'product-form-v1', section_id: section_id, product: product, current_variant: current_variant -%}
      </div>
      <div class="clear"></div>
    </div>
    {% comment %}
          <div class="se_prod-description">
            <div class="video-with-text">
              <div class="productDescription type-style-p-regular">
                {{ product.description }}
              </div>
                {% if section.settings.addvideo %}
                 {% assign video_url = product.metafields.custom.video_url %}
                  <div class="video-se_content">
                      <video src="{{ video_url }}" id="se_myVideo" class="se_video" autoplay loop muted playsinline></video>
                      <button class="se_play-button" onclick="playPause()">
                          <i class="fas fa-pause"></i>
                      </button>
                  </div>
                {% endif %}
             </div>
            {% if product.metafields.mix.contents_label != blank %}
              <div class="productLabel">
                {{ product.metafields.mix.contents_label }}
              </div>
            {% endif %}

      {% assign hasBox = false %}
          {% capture productBoxesHTML %}
            {% assign productMixs = product.metafields.custom.allProductMixs.value %}
            {% for mix in productMixs %}
              {% assign hasBox = true %}
              {% if mix != blank %}
                <a href="{{ mix.url }}" target="_blank">
                  <div class="productPartMix">
                    <div class="productPartMixImage">
                      <img src="{{ mix | image_url: width: 150 }}">
                    </div>
                    <div class="productPartMixContent">
                      <div class="productPartMixTitle type-style-card-h">
                          {{ mix.title }}
                      </div>
                      <div class="productPartMixVendor type-style-card-h-subhead">
                        {{ mix.vendor }}
                      </div>
                    </div>
                  </div>
                </a>
              {% endif%}
            {% endfor %}
            <div class="clear"></div>
          {% endcapture%}

            {% comment %}
                {{ product.metafields.my_fields.productMix_12 }}

                {% assign recommended_product_1 =  product.metafields.my_fields.productMix_12.value %}
              {{ recommended_product_1.title }}

              <img src="{{ recommended_product_1 | image_url: width: 300 }}">
            {% endcomment %}
          </div>
    {% endcomment %}
  </div>
  {% if hasBox == true %}
    <div class="productBoxContent">
      <div class="productBoxContentHeadline type-style-h3-bold v">Slikket i dette produkt er:</div>
      <div class="productBoxContent-items">{{ productBoxesHTML }}</div>
    </div>
  {% endif -%}
  '
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    var urlParams = new URLSearchParams(window.location.search);
    var variantId = urlParams.get('variant');
    var productPrice = document.getElementById('productPrice');

    // Function to update the price based on the variant ID
    function updatePrice(variantId) {
      var selectedVariant = product.variants.find(function(variant) {
        return variant.id == variantId;
      });

      if (selectedVariant) {
        productPrice.textContent = selectedVariant.price | money;
      }
    }

    // Initial update based on URL parameter
    if (variantId) {
      updatePrice(variantId);
    }

    // Listen for changes in the URL
    window.addEventListener('popstate', function() {
      var newUrlParams = new URLSearchParams(window.location.search);
      var newVariantId = newUrlParams.get('variant');

      if (newVariantId) {
        updatePrice(newVariantId);
      }
    });
  });
</script>
<script>
              function playPause() {
      var video = document.getElementById("se_myVideo");
      var playButton = document.querySelector('.se_play-button');

      if (video.paused) {
          video.play();
          playButton.innerHTML = '<i class="fas fa-pause"></i>';
      } else {
          video.pause();
          playButton.innerHTML = '<i class="fas fa-play"></i>';
      }
  }
</script>

{% schema %}
{
  "name": "pp_v1_sec_top",
  "tag": "section",
  "class": "shopadjust-top",
  "settings": [
     {
        "type": "checkbox",
        "id": "addtopimage",
        "label": "Add top image"
      },
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image top"
      },
      {
        "type": "checkbox",
        "id": "addvideo",
        "label": "Add video"
      },
      {
        "type": "text",
        "id": "video",
        "label": "Video URL"
      },
      {
        "type": "header",
        "content": "Delivery info under title"
      },
      {
        "type": "text",
        "id": "order_before",
        "label": "Before timer text",
        "default": "Bestil indenfor"
      },
      {
        "type": "richtext",
        "id": "weekendtext",
        "label": "Weekend text"
      },
      {
        "type": "richtext",
        "id": "holidaytext",
        "label": "Holiday text"
      }
  ],
  "presets": [
    {
      "name": "pp_v1_sec_top"
    }
  ]
}
{% endschema %}
